<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Brainfuck Decoder</title>
    <style>
        body { font-family: Arial, sans-serif; }
        textarea { width: 100%; height: 200px; }
        button { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Enhanced Brainfuck Code Decoder</h1>
    <textarea id="brainfuckCode" placeholder="Enter Brainfuck code here..."></textarea>
    <input type="text" id="inputChar" placeholder="Input for ',' command" />
    <button onclick="decodeBrainfuck()">Decode</button>
    <h2>Decoded Output:</h2>
    <pre id="output"></pre>

    <script>
        function decodeBrainfuck() {
            const code = document.getElementById('brainfuckCode').value;
            const input = document.getElementById('inputChar').value.split('');
            const output = document.getElementById('output');
            output.textContent = brainfuckInterpreter(code, input);
        }

        function brainfuckInterpreter(code, input) {
            const tape = new Uint8Array(30000);
            let pointer = 0;
            let output = '';
            let inputPointer = 0;
            const loopStack = [];
            for (let i = 0; i < code.length; i++) {
                switch (code[i]) {
                    case '>': pointer++; break;
                    case '<': pointer--; break;
                    case '+': tape[pointer]++; break;
                    case '-': tape[pointer]--; break;
                    case '.': output += String.fromCharCode(tape[pointer]); break;
                    case ',': tape[pointer] = inputPointer < input.length ? input[inputPointer++].charCodeAt(0) : 0; break;
                    case '[': if (tape[pointer] === 0) { 
                                  let loopCount = 1; 
                                  while (loopCount > 0) { 
                                      i++; 
                                      if (code[i] === '[') loopCount++; 
                                      if (code[i] === ']') loopCount--; 
                                  } 
                              } else { loopStack.push(i); } break;
                    case ']': if (tape[pointer] !== 0) { i = loopStack[loopStack.length - 1]; } else { loopStack.pop(); } break;
                }
            }
            return output;
        }
    </script>
</body>
</html>
